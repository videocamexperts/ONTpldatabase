<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plate Database</title>
    <script src="https://apis.google.com/js/api.js"></script>
</head>
<body>
    <div class="container">
        <h1>Plate Database</h1>
        <form id="plate-form">
            <div class="form-group">
                <label for="plate">Enter Plate:</label>
                <input type="text" id="plate" name="plate" required>
            </div>
            <button type="submit">Add to Database</button>
        </form>
    </div>

    <script>
        const API_KEY = 'AIzaSyD6VUgu1x4lQOXSThhlpV3WHYprmKRp65Q'; // Replace with your API key
        const SPREADSHEET_ID = '1q1iVK77p0MMEMfmPhOTViPMi812Szdqi8qhYtWVlMxI'; // Replace with your Spreadsheet ID
        const RANGE = 'Sheet1!A2:A'; // Adjust the range if needed

        document.getElementById('plate-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const plate = document.getElementById('plate').value.trim();
            if (plate) {
                addPlateToDatabase(plate);
            }
        });

        function addPlateToDatabase(plate) {
            const params = {
                spreadsheetId: SPREADSHEET_ID,
                range: RANGE,
                valueInputOption: 'RAW',
                insertDataOption: 'INSERT_ROWS',
                key: API_KEY
            };

            const valueRangeBody = {
                "values": [
                    [plate]
                ]
            };

            gapi.client.sheets.spreadsheets.values.append(params, valueRangeBody).then(function(response) {
                console.log('Plate added to Google Sheet:', response);
                document.getElementById('plate-form').reset();
            }, function(reason) {
                console.error('Error: ' + reason.result.error.message);
            });
        }

        function initClient() {
            gapi.client.init({
                apiKey: API_KEY,
                discoveryDocs: ["https://sheets.googleapis.com/$discovery/rest?version=v4"]
            }).then(function () {
                console.log('GAPI client initialized.');
            }, function(error) {
                console.error('Error initializing GAPI client:', error);
            });
        }

        gapi.load('client', initClient);
    </script>
</body>
</html>
